# Databases Course Project

Designing a database of online clothing stores.

### Conceptual model

![tag1](images/ConceptualModel.png "Conceptual model of the database").

Объяснение связей концептуальной модели:
1. Покупатель может сделать либо 0, либо больше заказов. Конкретный заказ может 
относиться только к одному покупателю.
2. Сотрудник мог либо не выдать еще ни одного заказа, если только устроился, либо уже 
выдать хотя бы один. Конкретный же заказ мог выдать только один сотрудник пункта 
выдачи.
3. Конкретный сотрудник может работать только в одном пункте доставки. В каждом 
пункте доставки может числиться и работать много сотрудников.
4. Конкретный заказ мог быть сделан только в одном магазине. В каждом 
магазине, конечно же, происходит много заказов, но возможно если магазин только появился 
еще ни один заказ не был сделан.
5. В каждом заказе есть хотя бы одна вещь, чтобы он мог считаться валидным. Одна вещь 
может появляться в разных заказах.
6. У интернет магазина может быть много пунктов выдачи, но хотя бы один точно есть. 
Каждый пункт доставки относится только к одному интернет магазину.
7. Какая-то вещь может либо нигде не продаваться, либо продаваться хотя бы в одном 
магазине. В каждом же магазине продается хотя бы одна вещь.
8. Бренд выпускает хотя бы одну вещь. Каждую вещь, так как она уникальна может 
продавать только один бренд.


### Logical model

БД находится в 3-ей нормальной форме. 

1 НФ – так как в каждой таблице для каждого атрибута содержится только одно значение.

2 НФ – все атрибуты зависят от первичного ключа целиком, а не от какой-то его части. В тех 
таблицах, где один первичный ключ – это очевидно выполнено. В таблицах 
`Clothes_in_order`  и  `Clothes_in_store` это так потому что количество вещей одного `id` 
зависит и от `id` магазина или заказа и от `id` вещи. Чтобы сделать версионную таблицу 
согласованной со 2-ой нормальной формой пришлось вынести версионность в отдельную 
таблицу `employee_position`, так как если оставить все это в одной таблице, то первичным 
ключом уже будет пара `employee_id` и `valid_from_dttm` и тогда такие атрибуты как, 
например, `employer_nm` будут зависеть только от части первичного ключа.

3 НФ - все атрибуты зависят только от первичного ключа, но не от других атрибутов. Не ясно 
как это доказывать формально, но кажется это достаточно очевидно.


Таблица `employee_position` является версионной типа `SCD2`.  В ней под каждую версию 
позиции работника создается новая строка, в которой записаны его новая позиция и 
зарплата с добавлением даты начала и конца, когда конкретный работник занимал 
конкретную должность.

![tag2](images/LogicalModel.png "Logical model of the database").

